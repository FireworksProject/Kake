<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Kake</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" media="all" href="./css/ui-darkness/jquery-ui-1.8.6.custom.css"/>
<script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="./js/jquery-ui-1.8.6.custom.min.js"></script>
<script type="text/javascript" src="./js/jquery.tmpl.beta1.js"></script>
</head><body>

<div id="error-dialog">
	<p id="error-string"></p>
	<p>line: <em id="error-line"></em></p>
	<p>file: <em id="error-file"></em></p>
	<pre><code id="error-stack"></code></pre>
</div>

<div id="project-dialog">
	<p id="project-dialog-message"></p>
</div>

<div id="header">
	<div id="branding">
		<h1 class="branding">kake</h1>
	</div><!-- end #branding -->
</div><!-- end #header -->
<div id="workspace">
	<div id="start">
		<p><button id="load-project">Load a Project</button></p>
	</div>
	<div id="project">
		<div id="project-ui">
			<div id="start">
				<p>
					<button id="build-project">Build</button>
					<button id="reload-project">Reload</button>
				</p>
			</div>
			<div>
				<h3>Settings</h3>
				<div id="settings-box"><ul id="settings"></ul></div>
				<script id="setting-template" type="text/x-jquery-template">
					<li class="settings">
					<span class="setting-name">${name}</span> : <span class="setting-value">${value}</span>
					</li>
				</script>
			</div>
			<div>
				<h3>Tasks</h3>
				<div id="tasks-box"><ul id="tasks"></ul></div>
				<script id="task-template" type="text/x-jquery-template">
					<li class="tasks run">
						<p class="task-name">${name}</p>
						<p class="task-description">${description}</p>
						<h4 class="task-deps">Dependencies:</h4>
						<ul class="task-deps">
						{{each deps}}
							<li class="task-deps">${value.name}</li>
						{{/each}}
						</ul>
					</li>
				</script>
			</div>
		</div>
	</div><!-- end #project -->
</div><!-- end #workspace -->

<div id="messenger"></div>

<script type="text/javascript">//<![CDATA[
(function (window) {
	var jq = window.jQuery
	  , ui_rpc_methods = {}
	  ;

	jq('#error-dialog').hide();
	jq('#project-dialog').hide();
	jq('#project').hide();

	// Build and cache the templates.
	jq('#setting-template').template('setting');
	jq('#task-template').template('task');

	// Create jQuery UI buttons and attach handlers.
	jq('#load-project').button().click(load_project);
	jq('#build-project').button({disabled: true});
	jq('#reload-project').button({disabled: true});

	jq('#messenger')
		.hide()
		.bind('Kake-UI-RPC', function () {
			var msg = JSON.parse(jq(this).attr('data'));

			ui_rpc_methods[msg.method].apply({}, msg.params);
		})
		;

}(window));
//]]></script>
</body></html>
